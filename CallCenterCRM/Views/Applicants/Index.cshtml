@model IEnumerable<CallCenterCRM.Models.Applicant>

@{
	ViewData["Title"] = "Index";
}

<h1>Заявители</h1>

<p>
	<a asp-controller="Applications" asp-action="CreateApplicant" class="btn btn-success btn-rounded">Создать новое</a>
</p>
<div class="table-responsive">
	<table class="table table-striped">
		<thead>
			<tr>
				<th>
					Ф.И.О
				</th>
				<th>
					Адрес
				</th>
				<th>
					Дополнительная информация
				</th>
				<th>
					Количество обращений
				</th>
				@*<th></th>*@
			</tr>
		</thead>
		<tbody>
			@foreach (var item in Model)
			{
				<tr>
					<td>
						@Html.DisplayFor(modelItem => item.Surname)
						@Html.DisplayFor(modelItem => item.Firstname)
						@Html.DisplayFor(modelItem => item.Middlename)
					</td>
					<td>
						<b>Область: </b>@Html.DisplayFor(modelItem => item.Region)<br>
						<b>Район/город: </b>@Html.DisplayFor(modelItem => item.CityDistrict.Title)<br>
						<b>Текущий адрес проживания: </b>@Html.DisplayFor(modelItem => item.Address)<br>
					</td>
					<td>
						@if (item.Contact != null)
						{
							<b>Телефон:</b>
							@Html.DisplayFor(modelItem => item.Contact  ) <br>

						}
						@if (item.BirthDate != null)
						{
							<b>Дата рождения: </b>
							@Html.DisplayFor(modelItem => item.BirthDate ) <br>

						}
						@if (item.ExtraContact != null)
						{
							<b>Дополнительные телефоны:</b>
							@Html.DisplayFor(modelItem => item.ExtraContact )
							<br>
						}
						@if (item.Gender != null)
						{
							<b>Пол:</b>
							@Html.DisplayFor(modelItem => item.Gender )
							<br>
						}
					</td>
					<td>
						<a asp-controller="Applications" asp-action="ListByApplicant" asp-route-applicantId=@item.Id
						class="btn btn-rounded btn-info application-count" target="_blank">
							@item.Applications.Count
						</a>
						<a asp-controller="Applications" asp-action="EditApplicantCreateApp" asp-route-applicantId=@item.Id class="btn btn-rounded btn-primary">Создать новый</a>
					</td>
					<td>
						@*<a asp-action="Details" asp-route-id="@item.Id"><i class="mdi mdi-eye"></i></a>
						<a asp-action="Edit" asp-route-id="@item.Id"><i class="mdi mdi-lead-pencil icon-edit"></i></a>
						<a asp-action="Delete" asp-route-id="@item.Id"><i class="mdi mdi-delete"></i></a>*@
					</td>
				</tr>
			}
		</tbody>
	</table>
</div>

